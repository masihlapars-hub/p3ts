<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Virtual Pet Care Simulator</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            --primary: #ff8fab;
            --secondary: #a2d2ff;
            --accent: #ffd166;
            --success: #a3d977;
            --danger: #ff6b6b;
            --pastel-pink: #ffd1dc;
            --pastel-blue: #bde0fe;
            --pastel-green: #caffbf;
            --pastel-yellow: #fdffb6;
            --pastel-purple: #d8bbff;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        body {
            background: linear-gradient(135deg, var(--pastel-pink), var(--pastel-blue));
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 20px;
            color: #5a5a5a;
            overflow: auto;
        }

        .game-container {
            width: 100%;
            max-width: 1200px;
            background-color: white;
            border-radius: 25px;
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.15);
            overflow: hidden;
            position: relative;
            display: flex;
            flex-direction: column;
            min-height: 90vh;
            max-height: 95vh;
        }

        /* Header */
        .game-header {
            background: linear-gradient(to right, var(--primary), var(--secondary));
            padding: 15px 25px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            color: white;
            text-shadow: 0 1px 3px rgba(0, 0, 0, 0.2);
        }

        .game-title {
            font-size: 1.8rem;
            font-weight: bold;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .game-stats {
            display: flex;
            gap: 20px;
        }

        .stat-item {
            display: flex;
            align-items: center;
            gap: 8px;
            background-color: rgba(255, 255, 255, 0.25);
            padding: 8px 15px;
            border-radius: 20px;
            font-weight: 600;
        }

        /* Main Content */
        .game-main {
            display: flex;
            flex: 1;
            overflow: hidden;
            min-height: 600px;
        }

        /* Sidebar */
        .sidebar {
            width: 280px;
            background: linear-gradient(to bottom, #f8f9fa, #e9ecef);
            padding: 20px;
            display: flex;
            flex-direction: column;
            gap: 20px;
            border-right: 1px solid #dee2e6;
            overflow-y: auto;
        }

        .pet-info-card {
            background: white;
            border-radius: 15px;
            padding: 15px;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.05);
            text-align: center;
        }

        .pet-avatar {
            width: 120px;
            height: 120px;
            margin: 0 auto 10px;
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 4rem;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
            position: relative;
            overflow: hidden;
        }

        .pet-avatar.cat {
            background: linear-gradient(135deg, #ffb6c1, #ff8fab);
        }

        .pet-avatar.dog {
            background: linear-gradient(135deg, #ffd166, #ffb347);
        }

        .pet-avatar.rabbit {
            background: linear-gradient(135deg, #e0f7fa, #b2ebf2);
        }

        .pet-avatar.hamster {
            background: linear-gradient(135deg, #d8bbff, #b388eb);
        }

        .pet-name {
            font-size: 1.4rem;
            font-weight: bold;
            color: var(--primary);
            margin-bottom: 5px;
        }

        .pet-level {
            background: var(--accent);
            color: white;
            padding: 3px 10px;
            border-radius: 15px;
            font-size: 0.9rem;
            display: inline-block;
            margin-bottom: 10px;
        }

        .status-bars {
            display: flex;
            flex-direction: column;
            gap: 12px;
        }

        .status-bar {
            display: flex;
            flex-direction: column;
            gap: 5px;
        }

        .status-label {
            display: flex;
            justify-content: space-between;
            font-size: 0.9rem;
            font-weight: 600;
        }

        .status-container {
            height: 12px;
            background-color: #e0e0e0;
            border-radius: 10px;
            overflow: hidden;
        }

        .status-fill {
            height: 100%;
            border-radius: 10px;
            transition: width 0.5s ease;
            position: relative;
        }

        .hunger-fill { background-color: var(--primary); }
        .thirst-fill { background-color: var(--secondary); }
        .hygiene-fill { background-color: var(--success); }
        .happiness-fill { background-color: #ff6b95; }
        .energy-fill { background-color: var(--accent); }

        .achievements {
            background: white;
            border-radius: 15px;
            padding: 15px;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.05);
        }

        .achievements h3 {
            margin-bottom: 10px;
            color: var(--primary);
            text-align: center;
        }

        .achievement-list {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }

        .achievement {
            display: flex;
            align-items: center;
            gap: 10px;
            padding: 8px;
            background: #f8f9fa;
            border-radius: 8px;
        }

        .achievement.locked {
            opacity: 0.6;
        }

        /* Main Game Area */
        .main-area {
            flex: 1;
            display: flex;
            flex-direction: column;
            padding: 20px;
            gap: 20px;
            overflow-y: auto;
        }

        .pet-room {
            flex: 1;
            background: linear-gradient(to bottom, #e0f7fa, #b2ebf2);
            border-radius: 20px;
            padding: 20px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            position: relative;
            box-shadow: inset 0 0 15px rgba(0, 0, 0, 0.05);
            overflow: hidden;
            min-height: 400px;
        }

        .room-background {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="100" height="100" viewBox="0 0 100 100"><rect width="100" height="100" fill="%23b2ebf2"/><circle cx="20" cy="20" r="5" fill="%23e0f7fa"/><circle cx="60" cy="40" r="8" fill="%23e0f7fa"/><circle cx="80" cy="70" r="6" fill="%23e0f7fa"/></svg>');
            z-index: 1;
        }

        .pet-display {
            position: relative;
            width: 250px;
            height: 250px;
            display: flex;
            justify-content: center;
            align-items: center;
            margin-bottom: 20px;
            z-index: 2;
        }

        .pet {
            width: 200px;
            height: 200px;
            position: relative;
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.1);
            transition: transform 0.3s ease;
            cursor: pointer;
            z-index: 2;
        }

        .pet.cat {
            background: linear-gradient(135deg, #ffb6c1, #ff8fab);
            border-radius: 50% 50% 40% 40%;
        }

        .pet.dog {
            background: linear-gradient(135deg, #ffd166, #ffb347);
            border-radius: 50% 50% 40% 40%;
        }

        .pet.rabbit {
            background: linear-gradient(135deg, #e0f7fa, #b2ebf2);
            border-radius: 50% 50% 40% 40%;
        }

        .pet.hamster {
            background: linear-gradient(135deg, #d8bbff, #b388eb);
            border-radius: 50%;
        }

        .pet:hover {
            transform: scale(1.05);
        }

        .pet-face {
            position: absolute;
            top: 50px;
            left: 50%;
            transform: translateX(-50%);
            width: 120px;
            height: 100px;
        }

        .pet-eyes {
            display: flex;
            justify-content: space-around;
            margin-bottom: 15px;
        }

        .pet-eye {
            width: 25px;
            height: 25px;
            background-color: #333;
            border-radius: 50%;
            position: relative;
        }

        .pet-eye::after {
            content: '';
            position: absolute;
            width: 10px;
            height: 10px;
            background-color: white;
            border-radius: 50%;
            top: 5px;
            left: 5px;
        }

        .pet-mouth {
            width: 50px;
            height: 25px;
            border-bottom: 4px solid #333;
            border-radius: 0 0 25px 25px;
            margin: 0 auto;
            transition: all 0.3s ease;
        }

        .pet-happy .pet-mouth {
            border-bottom: 4px solid #333;
            border-radius: 0 0 25px 25px;
        }

        .pet-sad .pet-mouth {
            border-bottom: 4px solid var(--danger);
            border-radius: 25px 25px 0 0;
            transform: rotate(180deg);
        }

        /* Ears for cat and rabbit */
        .pet-ears {
            position: absolute;
            top: -30px;
            left: 50%;
            transform: translateX(-50%);
            width: 160px;
            display: flex;
            justify-content: space-between;
        }

        .pet-ear {
            width: 40px;
            height: 60px;
            background: inherit;
            border-radius: 50%;
        }

        .pet.cat .pet-ear {
            background: linear-gradient(135deg, #ff8fab, #ff6b95);
            clip-path: polygon(50% 0%, 0% 100%, 100% 100%);
        }

        .pet.rabbit .pet-ear {
            background: linear-gradient(135deg, #b2ebf2, #80deea);
            clip-path: polygon(30% 0%, 70% 0%, 100% 100%, 0% 100%);
            height: 80px;
        }

        .room-items {
            display: flex;
            gap: 15px;
            margin-top: 20px;
            z-index: 2;
        }

        .room-item {
            width: 70px;
            height: 70px;
            background: white;
            border-radius: 15px;
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 1.8rem;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .room-item:hover {
            transform: translateY(-5px);
        }

        /* Activities */
        .activities {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 15px;
        }

        .activity {
            background: linear-gradient(to bottom right, var(--pastel-pink), var(--primary));
            border: none;
            border-radius: 15px;
            padding: 15px 10px;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 10px;
            cursor: pointer;
            transition: all 0.3s ease;
            color: white;
            font-weight: bold;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
        }

        .activity:hover {
            transform: translateY(-5px);
            box-shadow: 0 6px 12px rgba(0, 0, 0, 0.15);
        }

        .activity:active {
            transform: translateY(0);
        }

        .activity i {
            font-size: 1.8rem;
        }

        /* Mini-game Area */
        .mini-game-container {
            display: none;
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(255, 255, 255, 0.95);
            z-index: 10;
            border-radius: 20px;
            padding: 20px;
            flex-direction: column;
            align-items: center;
            justify-content: center;
        }

        .mini-game-container.active {
            display: flex;
        }

        .mini-game-title {
            font-size: 1.8rem;
            color: var(--primary);
            margin-bottom: 20px;
            text-align: center;
        }

        .mini-game-area {
            width: 100%;
            height: 300px;
            background-color: #f0f8ff;
            border-radius: 15px;
            margin-bottom: 20px;
            position: relative;
            overflow: hidden;
            border: 2px dashed var(--pastel-blue);
        }

        .mini-game-controls {
            display: flex;
            justify-content: center;
            gap: 15px;
        }

        .game-btn {
            background: linear-gradient(to bottom, var(--primary), #ff6b95);
            border: none;
            border-radius: 12px;
            padding: 12px 25px;
            color: white;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.2s ease;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
        }

        .game-btn:hover {
            transform: scale(1.05);
        }

        .game-btn-secondary {
            background: linear-gradient(to bottom, #a2d2ff, #6dc1ff);
        }

        /* Shop */
        .shop-container {
            display: none;
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(255, 255, 255, 0.98);
            z-index: 10;
            border-radius: 20px;
            padding: 20px;
            flex-direction: column;
        }

        .shop-container.active {
            display: flex;
        }

        .shop-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .shop-title {
            font-size: 1.8rem;
            color: var(--primary);
        }

        .shop-categories {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
            overflow-x: auto;
            padding-bottom: 5px;
        }

        .category-btn {
            background: #f0f0f0;
            border: none;
            border-radius: 20px;
            padding: 8px 15px;
            cursor: pointer;
            transition: all 0.2s ease;
            white-space: nowrap;
        }

        .category-btn.active {
            background: var(--primary);
            color: white;
        }

        .shop-items {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
            gap: 15px;
            flex: 1;
            overflow-y: auto;
        }

        .shop-item {
            background: white;
            border-radius: 15px;
            padding: 15px;
            text-align: center;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
            cursor: pointer;
            transition: all 0.2s ease;
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .shop-item:hover {
            transform: translateY(-5px);
            box-shadow: 0 6px 12px rgba(0, 0, 0, 0.15);
        }

        .shop-item-icon {
            font-size: 2.5rem;
            color: var(--primary);
        }

        .shop-item-name {
            font-weight: bold;
        }

        .shop-item-price {
            color: var(--primary);
            font-weight: 600;
        }

        .shop-item-owned {
            font-size: 0.8rem;
            color: #888;
        }

        /* Navigation */
        .game-nav {
            display: flex;
            justify-content: center;
            gap: 10px;
            margin-top: 10px;
        }

        .nav-btn {
            background: linear-gradient(to bottom, var(--pastel-blue), var(--secondary));
            border: none;
            border-radius: 12px;
            padding: 10px 20px;
            color: #333;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .nav-btn.active {
            background: linear-gradient(to bottom, var(--primary), #ff6b95);
            color: white;
        }

        .nav-btn:hover {
            transform: scale(1.05);
        }

        /* Animations */
        @keyframes bounce {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-15px); }
        }

        @keyframes wiggle {
            0%, 100% { transform: rotate(0deg); }
            25% { transform: rotate(5deg); }
            75% { transform: rotate(-5deg); }
        }

        @keyframes float {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-10px); }
        }

        .pet-animation {
            animation: bounce 0.8s infinite;
        }

        .pet-wiggle {
            animation: wiggle 0.5s ease-in-out;
        }

        .float {
            animation: float 3s ease-in-out infinite;
        }

        /* Notifications */
        .notification {
            position: fixed;
            top: 20px;
            right: 20px;
            background: white;
            padding: 15px 20px;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
            display: flex;
            align-items: center;
            gap: 10px;
            z-index: 100;
            transform: translateX(150%);
            transition: transform 0.3s ease;
        }

        .notification.show {
            transform: translateX(0);
        }

        .notification i {
            font-size: 1.5rem;
        }

        .notification.success i {
            color: var(--success);
        }

        .notification.info i {
            color: var(--secondary);
        }

        .notification.warning i {
            color: var(--accent);
        }

        .notification.error i {
            color: var(--danger);
        }

        /* Selection Screen */
        .selection-screen {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(255, 255, 255, 0.98);
            z-index: 20;
            border-radius: 20px;
            padding: 20px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            text-align: center;
        }

        .selection-screen h2 {
            font-size: 2.5rem;
            color: var(--primary);
            margin-bottom: 10px;
        }

        .selection-screen p {
            font-size: 1.2rem;
            margin-bottom: 30px;
            color: #666;
        }

        .pet-options {
            display: flex;
            gap: 20px;
            margin-bottom: 30px;
            flex-wrap: wrap;
            justify-content: center;
        }

        .pet-option {
            background: white;
            border-radius: 20px;
            padding: 20px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
            cursor: pointer;
            transition: all 0.3s ease;
            width: 180px;
        }

        .pet-option:hover {
            transform: translateY(-10px);
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.15);
        }

        .pet-option.selected {
            border: 3px solid var(--primary);
        }

        .pet-option-icon {
            font-size: 5rem;
            margin-bottom: 10px;
        }

        .pet-option-name {
            font-weight: bold;
            font-size: 1.2rem;
            margin-bottom: 5px;
        }

        .pet-option-desc {
            font-size: 0.9rem;
            color: #666;
        }

        .name-input {
            padding: 12px 20px;
            border: 2px solid var(--pastel-pink);
            border-radius: 10px;
            font-size: 1.2rem;
            text-align: center;
            margin-bottom: 20px;
            width: 300px;
        }

        .start-btn {
            background: linear-gradient(to bottom, var(--primary), #ff6b95);
            border: none;
            border-radius: 12px;
            padding: 15px 40px;
            color: white;
            font-weight: bold;
            font-size: 1.2rem;
            cursor: pointer;
            transition: all 0.2s ease;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
        }

        .start-btn:hover {
            transform: scale(1.05);
        }

        /* Progress Bar */
        .xp-bar {
            height: 8px;
            background: #e0e0e0;
            border-radius: 4px;
            margin-top: 5px;
            overflow: hidden;
        }

        .xp-fill {
            height: 100%;
            background: linear-gradient(to right, var(--accent), #ff9e6d);
            border-radius: 4px;
            transition: width 0.5s ease;
        }

        /* Daily Reward */
        .daily-reward {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: white;
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
            z-index: 30;
            text-align: center;
            display: none;
        }

        .daily-reward.active {
            display: block;
        }

        .daily-reward h3 {
            font-size: 2rem;
            color: var(--primary);
            margin-bottom: 15px;
        }

        .reward-amount {
            font-size: 3rem;
            color: var(--accent);
            margin: 20px 0;
        }

        .reward-desc {
            font-size: 1.2rem;
            color: #666;
            margin-bottom: 20px;
        }

        /* Bubble for bath game */
        .bubble {
            position: absolute;
            background: rgba(255, 255, 255, 0.7);
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            cursor: pointer;
            transition: transform 0.2s;
        }

        .bubble:hover {
            transform: scale(1.1);
        }

        .bubble::after {
            content: '🫧';
            font-size: 1.5rem;
        }

        /* Food item for feeding game */
        .food-item {
            position: absolute;
            font-size: 2.5rem;
            cursor: grab;
            user-select: none;
            transition: transform 0.2s;
        }

        .food-item:hover {
            transform: scale(1.2);
        }

        /* Ball for play game */
        .ball {
            position: absolute;
            font-size: 2.5rem;
            cursor: pointer;
            transition: all 0.5s ease;
        }

        .ball:hover {
            transform: scale(1.2);
        }

        /* Pet accessories */
        .pet-accessory {
            position: absolute;
            z-index: 3;
        }

        .pet-bow {
            top: 10px;
            left: 50%;
            transform: translateX(-50%);
            font-size: 1.5rem;
        }

        /* Responsive */
        @media (max-width: 900px) {
            .game-main {
                flex-direction: column;
            }
            
            .sidebar {
                width: 100%;
                flex-direction: row;
                overflow-x: auto;
                padding: 15px;
            }
            
            .pet-info-card {
                min-width: 250px;
            }
            
            .activities {
                grid-template-columns: repeat(2, 1fr);
            }
            
            .shop-items {
                grid-template-columns: repeat(2, 1fr);
            }
            
            .pet-options {
                flex-direction: column;
                align-items: center;
            }
            
            .pet-display {
                width: 200px;
                height: 200px;
            }
            
            .pet {
                width: 160px;
                height: 160px;
            }
        }

        @media (max-width: 600px) {
            .game-stats {
                flex-direction: column;
                gap: 5px;
            }
            
            .stat-item {
                padding: 5px 10px;
            }
            
            .room-items {
                flex-wrap: wrap;
                justify-content: center;
            }
            
            .pet-option {
                width: 140px;
            }
            
            .pet-option-icon {
                font-size: 4rem;
            }
        }
    </style>
</head>
<body>
    <div class="game-container">
        <!-- Selection Screen -->
        <div class="selection-screen" id="selection-screen">
            <h2>Virtual Pet Care Simulator</h2>
            <p>Pilih hewan peliharaan virtualmu dan berikan nama!</p>
            
            <div class="pet-options">
                <div class="pet-option" data-pet="cat">
                    <div class="pet-option-icon">🐱</div>
                    <div class="pet-option-name">Kucing</div>
                    <div class="pet-option-desc">Mandiri dan lucu</div>
                </div>
                <div class="pet-option" data-pet="dog">
                    <div class="pet-option-icon">🐶</div>
                    <div class="pet-option-name">Anjing</div>
                    <div class="pet-option-desc">Aktif dan setia</div>
                </div>
                <div class="pet-option" data-pet="rabbit">
                    <div class="pet-option-icon">🐰</div>
                    <div class="pet-option-name">Kelinci</div>
                    <div class="pet-option-desc">Lincah dan imut</div>
                </div>
                <div class="pet-option" data-pet="hamster">
                    <div class="pet-option-icon">🐹</div>
                    <div class="pet-option-name">Hamster</div>
                    <div class="pet-option-desc">Kecil dan menggemaskan</div>
                </div>
            </div>
            
            <input type="text" class="name-input" id="pet-name-input" placeholder="Masukkan nama pet..." maxlength="12">
            <button class="start-btn" id="start-btn">Mulai Permainan</button>
        </div>

        <!-- Daily Reward Popup -->
        <div class="daily-reward" id="daily-reward">
            <h3>Hadiah Harian!</h3>
            <div class="reward-amount">+50 🪙</div>
            <p class="reward-desc">Kembali besok untuk hadiah yang lebih besar!</p>
            <button class="game-btn" id="claim-reward">Klaim</button>
        </div>

        <div class="game-header">
            <div class="game-title">
                <i class="fas fa-paw"></i>
                Virtual Pet Care
            </div>
            <div class="game-stats">
                <div class="stat-item">
                    <i class="fas fa-coins"></i>
                    <span id="coins">250</span>
                </div>
                <div class="stat-item">
                    <i class="fas fa-trophy"></i>
                    Level <span id="level">3</span>
                </div>
                <div class="stat-item">
                    <i class="fas fa-calendar-day"></i>
                    Day <span id="day">5</span>
                </div>
            </div>
        </div>
        
        <div class="game-main">
            <div class="sidebar">
                <div class="pet-info-card">
                    <div class="pet-avatar cat" id="pet-avatar">
                        🐱
                    </div>
                    <div class="pet-name" id="pet-name">Fluffy</div>
                    <div class="pet-level">Level <span id="pet-level">3</span></div>
                    <div class="xp-bar">
                        <div class="xp-fill" id="xp-bar" style="width: 45%"></div>
                    </div>
                    
                    <div class="status-bars">
                        <div class="status-bar">
                            <div class="status-label">
                                <span><i class="fas fa-utensils"></i> Hunger</span>
                                <span id="hunger-value">65%</span>
                            </div>
                            <div class="status-container">
                                <div class="status-fill hunger-fill" id="hunger-bar" style="width: 65%"></div>
                            </div>
                        </div>
                        <div class="status-bar">
                            <div class="status-label">
                                <span><i class="fas fa-tint"></i> Thirst</span>
                                <span id="thirst-value">45%</span>
                            </div>
                            <div class="status-container">
                                <div class="status-fill thirst-fill" id="thirst-bar" style="width: 45%"></div>
                            </div>
                        </div>
                        <div class="status-bar">
                            <div class="status-label">
                                <span><i class="fas fa-soap"></i> Hygiene</span>
                                <span id="hygiene-value">80%</span>
                            </div>
                            <div class="status-container">
                                <div class="status-fill hygiene-fill" id="hygiene-bar" style="width: 80%"></div>
                            </div>
                        </div>
                        <div class="status-bar">
                            <div class="status-label">
                                <span><i class="fas fa-heart"></i> Happiness</span>
                                <span id="happiness-value">75%</span>
                            </div>
                            <div class="status-container">
                                <div class="status-fill happiness-fill" id="happiness-bar" style="width: 75%"></div>
                            </div>
                        </div>
                        <div class="status-bar">
                            <div class="status-label">
                                <span><i class="fas fa-bolt"></i> Energy</span>
                                <span id="energy-value">50%</span>
                            </div>
                            <div class="status-container">
                                <div class="status-fill energy-fill" id="energy-bar" style="width: 50%"></div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="achievements">
                    <h3>Achievements</h3>
                    <div class="achievement-list">
                        <div class="achievement">
                            <i class="fas fa-medal" style="color: gold;"></i>
                            <span>Happy Pet (7 days)</span>
                        </div>
                        <div class="achievement locked">
                            <i class="fas fa-medal" style="color: silver;"></i>
                            <span>Level 10 Reached</span>
                        </div>
                        <div class="achievement">
                            <i class="fas fa-medal" style="color: #cd7f32;"></i>
                            <span>5 Toys Collected</span>
                        </div>
                        <div class="achievement locked">
                            <i class="fas fa-medal" style="color: #a0a0a0;"></i>
                            <span>Perfect Care (All stats 100%)</span>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="main-area">
                <div class="pet-room">
                    <div class="room-background"></div>
                    <div class="pet-display">
                        <div class="pet cat pet-happy" id="pet">
                            <div class="pet-ears">
                                <div class="pet-ear left"></div>
                                <div class="pet-ear right"></div>
                            </div>
                            <div class="pet-face">
                                <div class="pet-eyes">
                                    <div class="pet-eye left"></div>
                                    <div class="pet-eye right"></div>
                                </div>
                                <div class="pet-mouth"></div>
                            </div>
                            <div class="pet-accessory pet-bow">🎀</div>
                        </div>
                    </div>
                    
                    <div class="room-items">
                        <div class="room-item" id="food-bowl">
                            <i class="fas fa-utensils"></i>
                        </div>
                        <div class="room-item" id="water-bowl">
                            <i class="fas fa-tint"></i>
                        </div>
                        <div class="room-item" id="toy">
                            <i class="fas fa-baseball-ball"></i>
                        </div>
                        <div class="room-item" id="bed">
                            <i class="fas fa-bed"></i>
                        </div>
                    </div>
                    
                    <!-- Mini-game for feeding -->
                    <div class="mini-game-container" id="feed-game">
                        <h2 class="mini-game-title">Feeding Time!</h2>
                        <div class="mini-game-area" id="feed-area">
                            <!-- Food items will be added here by JavaScript -->
                        </div>
                        <p>Drag the food to your pet's mouth!</p>
                        <div class="mini-game-controls">
                            <button class="game-btn" id="feed-complete">Complete</button>
                            <button class="game-btn game-btn-secondary" id="feed-cancel">Cancel</button>
                        </div>
                    </div>
                    
                    <!-- Mini-game for playing -->
                    <div class="mini-game-container" id="play-game">
                        <h2 class="mini-game-title">Play Time!</h2>
                        <div class="mini-game-area" id="play-area">
                            <!-- Ball and pet will be added here by JavaScript -->
                        </div>
                        <p>Click the ball to throw it for your pet!</p>
                        <div class="mini-game-controls">
                            <button class="game-btn" id="play-complete">Complete</button>
                            <button class="game-btn game-btn-secondary" id="play-cancel">Cancel</button>
                        </div>
                    </div>
                    
                    <!-- Mini-game for bathing -->
                    <div class="mini-game-container" id="bathe-game">
                        <h2 class="mini-game-title">Bath Time!</h2>
                        <div class="mini-game-area" id="bathe-area">
                            <!-- Bubbles will be added here by JavaScript -->
                        </div>
                        <p>Click on the soap bubbles to clean your pet!</p>
                        <div class="mini-game-controls">
                            <button class="game-btn" id="bathe-complete">Complete</button>
                            <button class="game-btn game-btn-secondary" id="bathe-cancel">Cancel</button>
                        </div>
                    </div>
                </div>
                
                <div class="activities">
                    <button class="activity" id="feed-btn">
                        <i class="fas fa-utensils"></i>
                        <div>Feed</div>
                    </button>
                    <button class="activity" id="drink-btn">
                        <i class="fas fa-tint"></i>
                        <div>Drink</div>
                    </button>
                    <button class="activity" id="bathe-btn">
                        <i class="fas fa-soap"></i>
                        <div>Bathe</div>
                    </button>
                    <button class="activity" id="play-btn">
                        <i class="fas fa-gamepad"></i>
                        <div>Play</div>
                    </button>
                    <button class="activity" id="sleep-btn">
                        <i class="fas fa-bed"></i>
                        <div>Sleep</div>
                    </button>
                    <button class="activity" id="shop-btn">
                        <i class="fas fa-shopping-cart"></i>
                        <div>Shop</div>
                    </button>
                    <button class="activity" id="groom-btn">
                        <i class="fas fa-spa"></i>
                        <div>Groom</div>
                    </button>
                    <button class="activity" id="heal-btn">
                        <i class="fas fa-heartbeat"></i>
                        <div>Heal</div>
                    </button>
                </div>
                
                <div class="game-nav">
                    <button class="nav-btn active" id="nav-care">Pet Care</button>
                    <button class="nav-btn" id="nav-room">Room</button>
                    <button class="nav-btn" id="nav-achievements">Achievements</button>
                </div>
            </div>
        </div>
        
        <!-- Shop -->
        <div class="shop-container" id="shop-panel">
            <div class="shop-header">
                <h2 class="shop-title">Pet Shop</h2>
                <button class="game-btn game-btn-secondary" id="shop-close">Close</button>
            </div>
            
            <div class="shop-categories">
                <button class="category-btn active" data-category="food">Food</button>
                <button class="category-btn" data-category="toys">Toys</button>
                <button class="category-btn" data-category="accessories">Accessories</button>
                <button class="category-btn" data-category="furniture">Furniture</button>
                <button class="category-btn" data-category="care">Care Items</button>
            </div>
            
            <div class="shop-items" id="shop-items">
                <!-- Shop items will be populated by JavaScript -->
            </div>
        </div>
    </div>
    
    <!-- Notification -->
    <div class="notification" id="notification">
        <i class="fas fa-check-circle"></i>
        <div id="notification-text">Your pet is happy!</div>
    </div>

    <script>
        // Game state
        const gameState = {
            hunger: 65,
            thirst: 45,
            hygiene: 80,
            happiness: 75,
            energy: 50,
            coins: 250,
            level: 3,
            day: 5,
            xp: 45,
            xpToNextLevel: 100,
            petName: "Fluffy",
            petType: "cat",
            petMood: "happy",
            lastPlayed: null,
            achievements: {
                happyWeek: false,
                level10: false,
                toyCollector: false,
                perfectCare: false
            },
            inventory: {
                food: [],
                toys: [],
                accessories: [],
                furniture: [],
                care: []
            },
            roomStyle: "default"
        };

        // DOM Elements
        const hungerBar = document.getElementById('hunger-bar');
        const thirstBar = document.getElementById('thirst-bar');
        const hygieneBar = document.getElementById('hygiene-bar');
        const happinessBar = document.getElementById('happiness-bar');
        const energyBar = document.getElementById('energy-bar');
        
        const hungerValue = document.getElementById('hunger-value');
        const thirstValue = document.getElementById('thirst-value');
        const hygieneValue = document.getElementById('hygiene-value');
        const happinessValue = document.getElementById('happiness-value');
        const energyValue = document.getElementById('energy-value');
        
        const coinsDisplay = document.getElementById('coins');
        const levelDisplay = document.getElementById('level');
        const dayDisplay = document.getElementById('day');
        const petNameDisplay = document.getElementById('pet-name');
        const petLevelDisplay = document.getElementById('pet-level');
        const xpBar = document.getElementById('xp-bar');
        const petElement = document.getElementById('pet');
        const petAvatar = document.getElementById('pet-avatar');
        
        // Activity buttons
        const feedBtn = document.getElementById('feed-btn');
        const drinkBtn = document.getElementById('drink-btn');
        const batheBtn = document.getElementById('bathe-btn');
        const playBtn = document.getElementById('play-btn');
        const sleepBtn = document.getElementById('sleep-btn');
        const shopBtn = document.getElementById('shop-btn');
        const groomBtn = document.getElementById('groom-btn');
        const healBtn = document.getElementById('heal-btn');
        
        // Mini-game panels
        const feedGame = document.getElementById('feed-game');
        const playGame = document.getElementById('play-game');
        const batheGame = document.getElementById('bathe-game');
        const shopPanel = document.getElementById('shop-panel');
        
        // Navigation buttons
        const navCare = document.getElementById('nav-care');
        const navRoom = document.getElementById('nav-room');
        const navAchievements = document.getElementById('nav-achievements');
        
        // Selection screen elements
        const selectionScreen = document.getElementById('selection-screen');
        const petOptions = document.querySelectorAll('.pet-option');
        const petNameInput = document.getElementById('pet-name-input');
        const startBtn = document.getElementById('start-btn');
        
        // Daily reward
        const dailyReward = document.getElementById('daily-reward');
        const claimRewardBtn = document.getElementById('claim-reward');
        
        // Notification
        const notification = document.getElementById('notification');
        const notificationText = document.getElementById('notification-text');

        // Shop data
        const shopItems = {
            food: [
                { id: 1, name: "Regular Food", price: 10, icon: "🥫", effect: { hunger: 20 } },
                { id: 2, name: "Premium Food", price: 30, icon: "🍗", effect: { hunger: 40, happiness: 5 } },
                { id: 3, name: "Gourmet Meal", price: 60, icon: "🍲", effect: { hunger: 60, happiness: 10 } },
                { id: 4, name: "Treats", price: 15, icon: "🍪", effect: { happiness: 15 } }
            ],
            toys: [
                { id: 5, name: "Ball", price: 20, icon: "🎾", effect: { happiness: 10 } },
                { id: 6, name: "Chew Toy", price: 25, icon: "🦴", effect: { happiness: 15 } },
                { id: 7, name: "Plush Toy", price: 40, icon: "🧸", effect: { happiness: 20 } },
                { id: 8, name: "Puzzle Toy", price: 50, icon: "🧩", effect: { happiness: 25, energy: -5 } }
            ],
            accessories: [
                { id: 9, name: "Collar", price: 30, icon: "⛓️", effect: { happiness: 5 } },
                { id: 10, name: "Bow", price: 25, icon: "🎀", effect: { happiness: 5 } },
                { id: 11, name: "Hat", price: 35, icon: "🧢", effect: { happiness: 8 } },
                { id: 12, name: "Glasses", price: 40, icon: "👓", effect: { happiness: 10 } }
            ],
            furniture: [
                { id: 13, name: "Comfy Bed", price: 80, icon: "🛏️", effect: { energy: 10 } },
                { id: 14, name: "Scratching Post", price: 60, icon: "📯", effect: { happiness: 15 } },
                { id: 15, name: "Pet House", price: 120, icon: "🏠", effect: { happiness: 20, energy: 15 } },
                { id: 16, name: "Fountain", price: 100, icon: "⛲", effect: { thirst: 10 } }
            ],
            care: [
                { id: 17, name: "Shampoo", price: 20, icon: "🧴", effect: { hygiene: 25 } },
                { id: 18, name: "Brush", price: 25, icon: "🪮", effect: { hygiene: 15, happiness: 5 } },
                { id: 19, name: "Medicine", price: 50, icon: "💊", effect: { energy: 30 } },
                { id: 20, name: "Vitamins", price: 40, icon: "💊", effect: { hunger: 10, energy: 10 } }
            ]
        };

        // Initialize game
        function initGame() {
            // Check if there's saved game data
            const savedGame = localStorage.getItem('virtualPetGame');
            if (savedGame) {
                const gameData = JSON.parse(savedGame);
                Object.assign(gameState, gameData);
                
                // Check if it's a new day for daily reward
                const today = new Date().toDateString();
                if (gameState.lastPlayed !== today) {
                    showDailyReward();
                    gameState.lastPlayed = today;
                    saveGame();
                }
                
                updateGameDisplay();
                updatePetVisual();
            } else {
                // Show selection screen for new game
                selectionScreen.style.display = 'flex';
                
                // Set up pet selection
                petOptions.forEach(option => {
                    option.addEventListener('click', function() {
                        petOptions.forEach(opt => opt.classList.remove('selected'));
                        this.classList.add('selected');
                        gameState.petType = this.getAttribute('data-pet');
                    });
                });
                
                // Set up start button
                startBtn.addEventListener('click', function() {
                    const name = petNameInput.value.trim();
                    if (name && gameState.petType) {
                        gameState.petName = name;
                        gameState.lastPlayed = new Date().toDateString();
                        selectionScreen.style.display = 'none';
                        updateGameDisplay();
                        updatePetVisual();
                        saveGame();
                        showNotification(`Selamat datang, ${name}!`, 'success');
                    } else {
                        showNotification('Pilih hewan dan beri nama terlebih dahulu!', 'error');
                    }
                });
                
                // Auto-select first pet
                petOptions[0].classList.add('selected');
                gameState.petType = petOptions[0].getAttribute('data-pet');
            }
            
            setupEventListeners();
            startGameLoop();
        }

        // Update all game displays
        function updateGameDisplay() {
            hungerBar.style.width = `${gameState.hunger}%`;
            thirstBar.style.width = `${gameState.thirst}%`;
            hygieneBar.style.width = `${gameState.hygiene}%`;
            happinessBar.style.width = `${gameState.happiness}%`;
            energyBar.style.width = `${gameState.energy}%`;
            xpBar.style.width = `${(gameState.xp / gameState.xpToNextLevel) * 100}%`;
            
            hungerValue.textContent = `${gameState.hunger}%`;
            thirstValue.textContent = `${gameState.thirst}%`;
            hygieneValue.textContent = `${gameState.hygiene}%`;
            happinessValue.textContent = `${gameState.happiness}%`;
            energyValue.textContent = `${gameState.energy}%`;
            
            coinsDisplay.textContent = gameState.coins;
            levelDisplay.textContent = gameState.level;
            dayDisplay.textContent = gameState.day;
            petNameDisplay.textContent = gameState.petName;
            petLevelDisplay.textContent = gameState.level;
            
            // Update pet avatar based on type
            const petIcons = {
                cat: '🐱',
                dog: '🐶',
                rabbit: '🐰',
                hamster: '🐹'
            };
            petAvatar.innerHTML = petIcons[gameState.petType];
            petAvatar.className = `pet-avatar ${gameState.petType}`;
            
            // Update pet mood
            updatePetMood();
        }

        // Update pet visual based on type
        function updatePetVisual() {
            // Remove all pet type classes
            petElement.classList.remove('cat', 'dog', 'rabbit', 'hamster');
            // Add current pet type class
            petElement.classList.add(gameState.petType);
            
            // Update ears visibility
            const ears = petElement.querySelector('.pet-ears');
            if (ears) {
                if (gameState.petType === 'cat' || gameState.petType === 'rabbit') {
                    ears.style.display = 'flex';
                } else {
                    ears.style.display = 'none';
                }
            }
        }

        // Update pet mood based on status
        function updatePetMood() {
            const avgStatus = (gameState.hunger + gameState.thirst + gameState.hygiene + gameState.happiness + gameState.energy) / 5;
            
            if (avgStatus >= 70) {
                gameState.petMood = "happy";
                petElement.classList.remove('pet-sad');
                petElement.classList.add('pet-happy');
            } else if (avgStatus >= 40) {
                gameState.petMood = "neutral";
                petElement.classList.remove('pet-sad', 'pet-happy');
            } else {
                gameState.petMood = "sad";
                petElement.classList.remove('pet-happy');
                petElement.classList.add('pet-sad');
            }
        }

        // Show notification
        function showNotification(message, type = 'info') {
            notificationText.textContent = message;
            notification.className = 'notification';
            notification.classList.add(type);
            notification.classList.add('show');
            
            setTimeout(() => {
                notification.classList.remove('show');
            }, 3000);
        }

        // Activity functions
        function feedPet() {
            showMiniGame(feedGame);
            setupFeedingGame();
        }

        function giveDrink() {
            gameState.thirst = Math.min(100, gameState.thirst + 30);
            gameState.happiness = Math.min(100, gameState.happiness + 5);
            addXP(5);
            updateGameDisplay();
            animatePet();
            showNotification("Your pet drank some water!", 'success');
            saveGame();
        }

        function bathePet() {
            showMiniGame(batheGame);
            setupBathingGame();
        }

        function playWithPet() {
            showMiniGame(playGame);
            setupPlayGame();
        }

        function putToSleep() {
            gameState.energy = Math.min(100, gameState.energy + 40);
            gameState.hunger = Math.max(0, gameState.hunger - 10);
            gameState.thirst = Math.max(0, gameState.thirst - 10);
            addXP(5);
            updateGameDisplay();
            animatePet();
            showNotification("Your pet is resting...", 'info');
            saveGame();
        }

        function groomPet() {
            gameState.hygiene = Math.min(100, gameState.hygiene + 20);
            gameState.happiness = Math.min(100, gameState.happiness + 10);
            addXP(5);
            updateGameDisplay();
            animatePet();
            showNotification("Your pet looks beautiful now!", 'success');
            saveGame();
        }

        function healPet() {
            if (gameState.coins >= 20) {
                gameState.hunger = Math.min(100, gameState.hunger + 10);
                gameState.thirst = Math.min(100, gameState.thirst + 10);
                gameState.energy = Math.min(100, gameState.energy + 15);
                gameState.coins -= 20;
                addXP(5);
                updateGameDisplay();
                animatePet();
                showNotification("Your pet feels better now!", 'success');
                saveGame();
            } else {
                showNotification("Not enough coins for healing!", 'error');
            }
        }

        function showShop() {
            shopPanel.classList.add('active');
            populateShop('food');
        }

        function showMiniGame(gameElement) {
            // Hide all mini-games first
            feedGame.classList.remove('active');
            playGame.classList.remove('active');
            batheGame.classList.remove('active');
            shopPanel.classList.remove('active');
            
            // Show the selected mini-game
            gameElement.classList.add('active');
        }

        function hideMiniGames() {
            feedGame.classList.remove('active');
            playGame.classList.remove('active');
            batheGame.classList.remove('active');
            shopPanel.classList.remove('active');
        }

        function animatePet() {
            petElement.classList.add('pet-animation');
            setTimeout(() => {
                petElement.classList.remove('pet-animation');
            }, 1000);
        }

        // Setup feeding mini-game
        function setupFeedingGame() {
            const feedArea = document.getElementById('feed-area');
            feedArea.innerHTML = '';
            
            // Create food items
            const foods = ['🍗', '🥩', '🍖', '🍎', '🥕'];
            foods.forEach((food, index) => {
                const foodItem = document.createElement('div');
                foodItem.className = 'food-item';
                foodItem.innerHTML = food;
                foodItem.style.left = `${20 + index * 60}px`;
                foodItem.style.top = '50px';
                foodItem.draggable = true;
                
                foodItem.addEventListener('dragstart', (e) => {
                    e.dataTransfer.setData('text/plain', food);
                });
                
                feedArea.appendChild(foodItem);
            });
            
            // Create pet target
            const petTarget = document.createElement('div');
            petTarget.id = 'pet-target';
            petTarget.innerHTML = getPetEmoji();
            petTarget.style.position = 'absolute';
            petTarget.style.bottom = '50px';
            petTarget.style.left = '50%';
            petTarget.style.transform = 'translateX(-50%)';
            petTarget.style.fontSize = '4rem';
            
            feedArea.appendChild(petTarget);
            
            // Allow drop
            feedArea.addEventListener('dragover', (e) => {
                e.preventDefault();
            });
            
            // Handle drop
            feedArea.addEventListener('drop', (e) => {
                e.preventDefault();
                const food = e.dataTransfer.getData('text/plain');
                
                // Animate food to pet's mouth
                const foodElement = document.createElement('div');
                foodElement.innerHTML = food;
                foodElement.style.position = 'absolute';
                foodElement.style.left = `${e.clientX - feedArea.getBoundingClientRect().left}px`;
                foodElement.style.top = `${e.clientY - feedArea.getBoundingClientRect().top}px`;
                foodElement.style.fontSize = '2rem';
                foodElement.style.transition = 'all 0.5s ease';
                feedArea.appendChild(foodElement);
                
                setTimeout(() => {
                    foodElement.style.left = '50%';
                    foodElement.style.top = '60%';
                    foodElement.style.transform = 'translate(-50%, -50%)';
                    foodElement.style.fontSize = '1rem';
                    
                    setTimeout(() => {
                        foodElement.remove();
                    }, 500);
                }, 100);
            });
        }

        // Setup bathing mini-game
        function setupBathingGame() {
            const batheArea = document.getElementById('bathe-area');
            batheArea.innerHTML = '';
            
            // Create pet
            const pet = document.createElement('div');
            pet.innerHTML = getPetEmoji();
            pet.style.position = 'absolute';
            pet.style.bottom = '50px';
            pet.style.left = '50%';
            pet.style.transform = 'translateX(-50%)';
            pet.style.fontSize = '4rem';
            batheArea.appendChild(pet);
            
            // Create bubbles
            for (let i = 0; i < 10; i++) {
                createBubble(batheArea);
            }
            
            // Add more bubbles when clicked
            batheArea.addEventListener('click', (e) => {
                if (e.target.classList.contains('bubble')) {
                    e.target.remove();
                    createBubble(batheArea);
                    
                    // Occasionally add multiple bubbles
                    if (Math.random() < 0.3) {
                        createBubble(batheArea);
                    }
                }
            });
        }

        function createBubble(container) {
            const bubble = document.createElement('div');
            bubble.className = 'bubble float';
            bubble.style.width = `${30 + Math.random() * 30}px`;
            bubble.style.height = bubble.style.width;
            bubble.style.left = `${Math.random() * 80}%`;
            bubble.style.top = `${Math.random() * 70}%`;
            container.appendChild(bubble);
        }

        // Setup play mini-game
        function setupPlayGame() {
            const playArea = document.getElementById('play-area');
            playArea.innerHTML = '';
            
            // Create ball
            const ball = document.createElement('div');
            ball.className = 'ball';
            ball.innerHTML = '🎾';
            ball.style.left = '50%';
            ball.style.top = '50px';
            ball.style.transform = 'translateX(-50%)';
            ball.style.cursor = 'pointer';
            playArea.appendChild(ball);
            
            // Create pet
            const pet = document.createElement('div');
            pet.innerHTML = getPetEmoji();
            pet.style.position = 'absolute';
            pet.style.bottom = '50px';
            pet.style.left = '50%';
            pet.style.transform = 'translateX(-50%)';
            pet.style.fontSize = '4rem';
            pet.style.transition = 'left 0.8s ease';
            playArea.appendChild(pet);
            
            // Ball click handler
            let throwCount = 0;
            ball.addEventListener('click', function() {
                throwCount++;
                
                // Animate the ball
                ball.style.transition = 'all 0.5s ease';
                ball.style.top = '200px';
                ball.style.left = `${Math.random() * 70 + 15}%`;
                
                // Animate the pet chasing the ball
                pet.style.left = ball.style.left;
                
                // Reset after animation
                setTimeout(() => {
                    ball.style.transition = 'none';
                    ball.style.top = '50px';
                    ball.style.left = '50%';
                    
                    pet.style.transition = 'none';
                    pet.style.left = '50%';
                }, 1000);
                
                // Complete game after 5 throws
                if (throwCount >= 5) {
                    setTimeout(() => {
                        document.getElementById('play-complete').click();
                    }, 1500);
                }
            });
        }

        // Get pet emoji based on type
        function getPetEmoji() {
            const emojis = {
                cat: '🐱',
                dog: '🐶',
                rabbit: '🐰',
                hamster: '🐹'
            };
            return emojis[gameState.petType] || '🐱';
        }

        // Populate shop with items
        function populateShop(category) {
            const shopItemsContainer = document.getElementById('shop-items');
            shopItemsContainer.innerHTML = '';
            
            const items = shopItems[category];
            items.forEach(item => {
                const shopItem = document.createElement('div');
                shopItem.className = 'shop-item';
                shopItem.innerHTML = `
                    <div class="shop-item-icon">${item.icon}</div>
                    <div class="shop-item-name">${item.name}</div>
                    <div class="shop-item-price">${item.price} Coins</div>
                    <div class="shop-item-owned">${getOwnedCount(item.id)} owned</div>
                `;
                
                shopItem.addEventListener('click', () => {
                    buyItem(item);
                });
                
                shopItemsContainer.appendChild(shopItem);
            });
        }

        // Get count of owned items
        function getOwnedCount(itemId) {
            for (const category in gameState.inventory) {
                const item = gameState.inventory[category].find(i => i.id === itemId);
                if (item) return item.quantity || 1;
            }
            return 0;
        }

        // Buy item from shop
        function buyItem(item) {
            if (gameState.coins >= item.price) {
                gameState.coins -= item.price;
                
                // Add to inventory
                let category = 'food';
                for (const cat in shopItems) {
                    if (shopItems[cat].some(i => i.id === item.id)) {
                        category = cat;
                        break;
                    }
                }
                
                const existingItem = gameState.inventory[category].find(i => i.id === item.id);
                if (existingItem) {
                    existingItem.quantity = (existingItem.quantity || 1) + 1;
                } else {
                    gameState.inventory[category].push({...item, quantity: 1});
                }
                
                updateGameDisplay();
                showNotification(`You bought ${item.name}!`, 'success');
                saveGame();
            } else {
                showNotification("Not enough coins!", 'error');
            }
        }

        // Add XP and check for level up
        function addXP(amount) {
            gameState.xp += amount;
            if (gameState.xp >= gameState.xpToNextLevel) {
                gameState.level++;
                gameState.xp = gameState.xp - gameState.xpToNextLevel;
                gameState.xpToNextLevel = Math.floor(gameState.xpToNextLevel * 1.2);
                showNotification(`Level up! Your pet is now level ${gameState.level}`, 'success');
                
                // Check for level 10 achievement
                if (gameState.level >= 10 && !gameState.achievements.level10) {
                    gameState.achievements.level10 = true;
                    showNotification('Achievement unlocked: Level 10 Reached!', 'success');
                }
            }
            updateGameDisplay();
        }

        // Show daily reward
        function showDailyReward() {
            dailyReward.classList.add('active');
        }

        // Save game to localStorage
        function saveGame() {
            localStorage.setItem('virtualPetGame', JSON.stringify(gameState));
        }

        // Gradually decrease stats over time
        function decreaseStats() {
            gameState.hunger = Math.max(0, gameState.hunger - 2);
            gameState.thirst = Math.max(0, gameState.thirst - 3);
            gameState.hygiene = Math.max(0, gameState.hygiene - 1);
            gameState.happiness = Math.max(0, gameState.happiness - 1);
            gameState.energy = Math.max(0, gameState.energy - 1);
            
            updateGameDisplay();
            
            // Random events
            if (Math.random() < 0.1) {
                showNotification("Your pet is looking for attention!", 'info');
            }
            
            // Check for low stats warnings
            if (gameState.hunger < 20) {
                showNotification("Your pet is very hungry!", 'warning');
            }
            if (gameState.thirst < 20) {
                showNotification("Your pet is very thirsty!", 'warning');
            }
            if (gameState.energy < 20) {
                showNotification("Your pet is very tired!", 'warning');
            }
            
            saveGame();
        }

        // Setup event listeners
        function setupEventListeners() {
            // Activity buttons
            feedBtn.addEventListener('click', feedPet);
            drinkBtn.addEventListener('click', giveDrink);
            batheBtn.addEventListener('click', bathePet);
            playBtn.addEventListener('click', playWithPet);
            sleepBtn.addEventListener('click', putToSleep);
            shopBtn.addEventListener('click', showShop);
            groomBtn.addEventListener('click', groomPet);
            healBtn.addEventListener('click', healPet);

            // Mini-game controls
            document.getElementById('feed-complete').addEventListener('click', function() {
                gameState.hunger = Math.min(100, gameState.hunger + 30);
                gameState.happiness = Math.min(100, gameState.happiness + 5);
                addXP(10);
                updateGameDisplay();
                hideMiniGames();
                animatePet();
                showNotification("Your pet enjoyed the meal!", 'success');
                saveGame();
            });

            document.getElementById('feed-cancel').addEventListener('click', hideMiniGames);

            document.getElementById('play-complete').addEventListener('click', function() {
                gameState.happiness = Math.min(100, gameState.happiness + 20);
                gameState.energy = Math.max(0, gameState.energy - 10);
                addXP(10);
                updateGameDisplay();
                hideMiniGames();
                animatePet();
                showNotification("Your pet had fun playing!", 'success');
                saveGame();
            });

            document.getElementById('play-cancel').addEventListener('click', hideMiniGames);

            document.getElementById('bathe-complete').addEventListener('click', function() {
                gameState.hygiene = Math.min(100, gameState.hygiene + 30);
                gameState.happiness = Math.min(100, gameState.happiness + 10);
                addXP(10);
                updateGameDisplay();
                hideMiniGames();
                animatePet();
                showNotification("Your pet is clean and fresh!", 'success');
                saveGame();
            });

            document.getElementById('bathe-cancel').addEventListener('click', hideMiniGames);

            document.getElementById('shop-close').addEventListener('click', hideMiniGames);

            // Shop categories
            document.querySelectorAll('.category-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    document.querySelectorAll('.category-btn').forEach(b => b.classList.remove('active'));
                    this.classList.add('active');
                    populateShop(this.getAttribute('data-category'));
                });
            });

            // Navigation
            navCare.addEventListener('click', function() {
                document.querySelectorAll('.nav-btn').forEach(btn => btn.classList.remove('active'));
                this.classList.add('active');
                hideMiniGames();
            });

            navRoom.addEventListener('click', function() {
                document.querySelectorAll('.nav-btn').forEach(btn => btn.classList.remove('active'));
                this.classList.add('active');
                hideMiniGames();
                showNotification("Room customization would be available here!", 'info');
            });

            navAchievements.addEventListener('click', function() {
                document.querySelectorAll('.nav-btn').forEach(btn => btn.classList.remove('active'));
                this.classList.add('active');
                hideMiniGames();
                showNotification("Achievements panel would be available here!", 'info');
            });

            // Daily reward
            claimRewardBtn.addEventListener('click', function() {
                gameState.coins += 50;
                gameState.day++;
                updateGameDisplay();
                dailyReward.classList.remove('active');
                showNotification("You claimed your daily reward!", 'success');
                saveGame();
            });

            // Pet interaction
            petElement.addEventListener('click', function() {
                gameState.happiness = Math.min(100, gameState.happiness + 5);
                updateGameDisplay();
                animatePet();
                showNotification("Your pet loves the attention!", 'success');
                saveGame();
            });

            // Room items
            document.getElementById('food-bowl').addEventListener('click', feedPet);
            document.getElementById('water-bowl').addEventListener('click', giveDrink);
            document.getElementById('toy').addEventListener('click', playWithPet);
            document.getElementById('bed').addEventListener('click', putToSleep);
        }

        // Start game loop
        function startGameLoop() {
            // Decrease stats every 30 seconds
            setInterval(decreaseStats, 30000);
            
            // Add some random events
            setInterval(() => {
                if (Math.random() < 0.2) {
                    showNotification("Your pet wants to play!", 'info');
                }
            }, 45000);
        }

        // Initialize the game when page loads
        window.addEventListener('DOMContentLoaded', initGame);
    </script>
</body>
</html>
